#include <FastLED.h>

#define LIGHT_SENSOR_PIN  A0
#define LIGHT_MIN        200
#define LIGHT_MAX        900
#define NUM_LEDS          64
#define DATA_PIN           6
#define BRIGHNESS         64

//#define DEBUG

CRGB leds[NUM_LEDS];
int c = 0;
int dot = 0;
int b = 10;
unsigned int randomDot = 0;

const unsigned int FacePixelMap[64] = {
  7,  8, 23, 24, 39, 40, 55, 56, 
  6,  9, 22, 25, 38, 41, 54, 57, 
  5, 10, 21, 26, 37, 42, 53, 58, 
  4, 11, 20, 27, 36, 43, 52, 59, 
  3, 12, 19, 28, 35, 44, 51, 60, 
  2, 13, 18, 29, 34, 45, 50, 61, 
  1, 14, 17, 30, 33, 46, 49, 62, 
  0, 15, 16, 31, 32, 47, 48, 63
};

unsigned int currentFace = 0;
unsigned int newFace = 1;
unsigned int brightness = 0;
unsigned int timeToUpdate = 60;

bool usedPoint[64] = { 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false, 
  false, false, false, false, false, false, false, false
};

const unsigned int imgFace[3][64][3] = {
  //{{ 172, 221, 165 }, { 0, 177, 0 }, { 65, 189, 51 }, { 163, 214, 163 }, { 227, 227, 227 }, { 134, 239, 113 }, { 124, 220, 106 }, { 66, 147, 62 }, { 22, 151, 19 }, { 88, 211, 80 }, { 51, 194, 38 }, { 106, 216, 95 }, { 65, 148, 60 }, { 108, 239, 85 }, { 95, 200, 76 }, { 227, 227, 227 }, { 59, 211, 38 }, { 10, 74, 1 }, { 40, 79, 32 }, { 151, 233, 142 }, { 78, 157, 77 }, { 9, 67, 2 }, { 40, 79, 32 }, { 239, 239, 239 }, { 65, 218, 47 }, { 9, 67, 2 }, { 0, 0, 0 }, { 97, 223, 76 }, { 59, 188, 42 }, { 0, 0, 0 }, { 1, 43, 0 }, { 118, 222, 97 }, { 138, 227, 130 }, { 95, 194, 78 }, { 55, 187, 42 }, { 0, 0, 0 }, { 0, 0, 0 }, { 119, 222, 97 }, { 60, 142, 56 }, { 86, 224, 65 }, { 171, 227, 159 }, { 71, 155, 67 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 97, 233, 76 }, { 204, 227, 199 }, { 207, 246, 199 }, { 97, 168, 96 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 88, 200, 70 }, { 71, 157, 66 }, { 97, 233, 76 }, { 130, 241, 108 }, { 0, 0, 0 }, { 151, 233, 142 }, { 66, 148, 62 }, { 0, 0, 0 }, { 44, 145, 39 }, { 99, 223, 78 }},
  {{ 255, 186, 70 }, { 255, 186, 70 }, { 255, 145, 5 }, { 255, 186, 70 }, { 255, 186, 70 }, { 255, 145, 5 }, { 255, 186, 70 }, { 255, 186, 70 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 255, 145, 5 }, { 255, 145, 5 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 255, 214, 91 }, { 255, 214, 91 }, { 255, 221, 143 }, { 205, 146, 42 }, { 205, 146, 42 }, { 255, 221, 143 }, { 255, 214, 91 }, { 255, 214, 91 }, { 255, 214, 91 }, { 255, 247, 120 }, { 255, 247, 120 }, { 205, 146, 42 }, { 205, 146, 42 }, { 255, 247, 120 }, { 255, 247, 120 }, { 255, 214, 91 }, { 255, 221, 143 }, { 255, 247, 120 }, { 255, 247, 120 }, { 205, 146, 42 }, { 205, 146, 42 }, { 255, 247, 120 }, { 255, 247, 120 }, { 255, 221, 143 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 205, 146, 42 }, { 73, 0, 0 }, { 255, 247, 120 }, { 255, 214, 91 }, { 255, 247, 120 }, { 255, 247, 120 }, { 255, 214, 91 }, { 255, 247, 120 }, { 73, 0, 0 }, { 198, 77, 0 }, { 255, 214, 91 }, { 255, 247, 120 }, { 255, 247, 120 }, { 255, 214, 91 }, { 255, 247, 120 }, { 255, 214, 91 }, { 198, 77, 0 }},
  {{ 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 0, 0, 3 }, { 0, 0, 3 }, { 0, 0, 3 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 255, 255, 19 }, { 70, 68, 61 }, { 70, 68, 61 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 255, 194, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 0, 0, 3 }, { 255, 255, 19 }, { 0, 0, 3 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 0, 0, 3 }, { 0, 0, 3 }, { 0, 0, 3 }, { 0, 0, 3 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 3 }, { 255, 194, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 255, 255, 19 }, { 0, 0, 3 }, { 255, 255, 255 }},
  //{{ 255, 168, 0 }, { 255, 255, 0 }, { 255, 78, 0 }, { 221, 0, 0 }, { 255, 0, 0 }, { 255, 78, 0 }, { 255, 78, 0 }, { 255, 78, 0 }, { 255, 78, 0 }, { 255, 255, 0 }, { 255, 78, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 255, 0, 0 }, { 255, 78, 0 }, { 255, 0, 0 }, { 255, 78, 0 }, { 8, 8, 5 }, { 8, 8, 5 }, { 255, 0, 0 }, { 255, 0, 0 }, { 8, 8, 5 }, { 8, 8, 5 }, { 255, 0, 0 }, { 255, 0, 0 }, { 8, 8, 5 }, { 0, 0, 0 }, { 255, 78, 0 }, { 255, 168, 0 }, { 0, 0, 0 }, { 8, 8, 5 }, { 255, 0, 0 }, { 221, 0, 0 }, { 255, 0, 0 }, { 255, 0, 0 }, { 8, 8, 5 }, { 8, 8, 5 }, { 255, 255, 0 }, { 255, 78, 0 }, { 255, 0, 0 }, { 255, 77, 0 }, { 245, 0, 0 }, { 5, 5, 4 }, { 7, 7, 4 }, { 7, 7, 4 }, { 5, 5, 4 }, { 255, 168, 0 }, { 255, 0, 0 }, { 255, 168, 0 }, { 255, 77, 0 }, { 5, 5, 4 }, { 211, 0, 0 }, { 245, 0, 0 }, { 5, 5, 4 }, { 255, 0, 0 }, { 221, 0, 0 }, { 255, 168, 0 }, { 255, 78, 0 }, { 181, 0, 0 }, { 255, 0, 0 }, { 255, 0, 0 }, { 163, 16, 16 }, { 221, 0, 0 }, { 221, 0, 0 }},
  //{{ 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 238, 226, 226 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 0, 0, 0 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 251, 218, 21 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 217, 184, 0 }, { 238, 226, 226 }, { 255, 255, 255 }, { 255, 255, 255 }, { 217, 0, 0 }, { 217, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 238, 226, 226 }, { 255, 255, 255 }, { 217, 0, 0 }, { 217, 0, 0 }, { 238, 226, 226 }, { 255, 255, 255 }, { 255, 255, 255 }},//spiderman
  //{ 0, 21, 137 }, { 0, 24, 146 }, { 0, 36, 183 }, { 0, 47, 221 }, { 0, 51, 239 }, { 0, 36, 183 }, { 0, 24, 146 }, { 0, 21, 137 }, { 233, 230, 223 }, { 247, 244, 237 }, { 0, 24, 146 }, { 0, 40, 201 }, { 0, 40, 201 }, { 0, 24, 146 }, { 247, 244, 237 }, { 233, 230, 223 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 19, 128 }, { 0, 36, 183 }, { 0, 36, 183 }, { 0, 19, 128 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 27, 155 }, { 0, 27, 155 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 164, 0 }, { 0, 21, 137 }, { 0, 21, 137 }, { 0, 164, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 251, 244 }, { 255, 255, 255 }, { 13, 11, 13 }, { 0, 4, 83 }, { 0, 4, 83 }, { 13, 11, 13 }, { 255, 255, 255 }, { 255, 251, 244 }, { 241, 149, 50 }, { 176, 83, 0 }, { 241, 149, 50 }, { 228, 141, 47 }, { 0, 0, 0 }, { 241, 149, 50 }, { 228, 141, 47 }, { 232, 154, 56 }, { 255, 240, 131 }, { 255, 240, 131 }, { 142, 56, 0 }, { 255, 255, 161 }, { 255, 255, 161 }, { 255, 255, 153 }, { 255, 255, 142 }, { 255, 240, 131 }
  //{{ 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 44, 27, 2 }, { 255, 214, 165 }, { 255, 223, 175 }, { 255, 229, 181 }, { 255, 229, 181 }, { 255, 223, 175 }, { 255, 218, 174 }, { 44, 27, 2 }, { 0, 0, 0 }, { 250, 250, 250 }, { 255, 223, 175 }, { 255, 229, 181 }, { 255, 229, 181 }, { 255, 223, 175 }, { 250, 250, 250 }, { 0, 0, 0 }, { 255, 198, 146 }, { 255, 216, 170 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 255, 216, 171 }, { 255, 193, 137 }, { 255, 188, 132 }, { 255, 192, 138 }, { 255, 212, 161 }, { 0, 0, 0 }, { 255, 0, 0 }, { 255, 0, 0 }, { 255, 215, 166 }, { 255, 182, 119 }, { 252, 181, 123 }, { 255, 184, 126 }, { 255, 191, 130 }, { 255, 194, 135 }, { 255, 195, 138 }, { 255, 198, 142 }, { 255, 192, 132 }, { 252, 178, 120 }}
  {{ 201, 28, 16 }, { 232, 36, 22 }, { 201, 28, 16 }, { 204, 44, 26 }, { 204, 44, 26 }, { 201, 28, 16 }, { 232, 36, 22 }, { 201, 28, 16 }, { 1, 1, 1 }, { 220, 31, 31 }, { 201, 28, 16 }, { 232, 36, 22 }, { 232, 36, 22 }, { 201, 28, 16 }, { 220, 31, 31 }, { 1, 1, 1 }, { 235, 235, 235 }, { 1, 1, 1 }, { 201, 28, 16 }, { 232, 36, 22 }, { 232, 36, 22 }, { 201, 28, 16 }, { 1, 1, 1 }, { 235, 235, 235 }, { 216, 216, 216 }, { 235, 235, 235 }, { 1, 1, 1 }, { 204, 44, 26 }, { 204, 44, 26 }, { 1, 1, 1 }, { 235, 235, 235 }, { 216, 216, 216 }, { 1, 1, 1 }, { 216, 216, 216 }, { 235, 235, 235 }, { 232, 36, 22 }, { 232, 36, 22 }, { 235, 235, 235 }, { 216, 216, 216 }, { 1, 1, 1 }, { 201, 28, 16 }, { 1, 1, 1 }, { 1, 1, 1 }, { 204, 44, 26 }, { 204, 44, 26 }, { 1, 1, 1 }, { 1, 1, 1 }, { 201, 28, 16 }, { 201, 28, 16 }, { 232, 36, 22 }, { 201, 28, 16 }, { 232, 36, 22 }, { 232, 36, 22 }, { 201, 28, 16 }, { 232, 36, 22 }, { 201, 28, 16 }, { 201, 28, 16 }, { 220, 31, 31 }, { 201, 28, 16 }, { 204, 44, 26 }, { 204, 44, 26 }, { 201, 28, 16 }, { 220, 31, 31 }, { 201, 28, 16 }}
  //{{ 0, 0, 0 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 56, 56, 56 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 200, 246 }, { 0, 118, 255 }, { 0, 241, 253 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 200, 246 }, { 0, 118, 255 }, { 0, 241, 253 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 56, 56, 56 }, { 56, 56, 56 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }}
  //{{ 251, 251, 251 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 251, 251, 251 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 255, 255, 255 }, { 0, 0, 0 }, { 255, 255, 255 }, { 251, 251, 251 }, { 255, 255, 255 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 255, 255, 255 }, { 251, 251, 251 }}
  //{{ 0, 0, 0 }, { 0, 0, 0 }, { 5, 0, 0 }, { 32, 0, 0 }, { 36, 4, 0 }, { 36, 0, 0 }, { 2, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 2, 0, 0 }, { 36, 0, 0 }, { 36, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 255, 78, 0 }, { 255, 255, 0 }, { 36, 5, 0 }, { 5, 0, 0 }, { 255, 255, 0 }, { 255, 78, 0 }, { 31, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 17, 0, 0 }, { 36, 5, 0 }, { 36, 0, 0 }, { 36, 0, 0 }, { 36, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 221, 0, 0 }, { 36, 0, 0 }, { 36, 4, 0 }, { 0, 0, 0 }, { 36, 0, 0 }, { 36, 4, 0 }, { 221, 0, 0 }, { 255, 78, 0 }, { 255, 78, 0 }, { 36, 0, 0 }, { 36, 0, 0 }, { 20, 0, 0 }, { 36, 5, 0 }, { 36, 4, 0 }, { 31, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }, { 15, 0, 0 }, { 24, 0, 0 }}
};

void DisplayLEDFace (unsigned int face[][3]) {
  for(int i = 0; i < NUM_LEDS; i++) { 
    dot = FacePixelMap[i];
    leds[dot].r = face[i][0];
    leds[dot].g = face[i][1];
    leds[dot].b = face[i][2];
  }
  FastLED.show();
}

void setup() {
  #ifdef DEBUG
    Serial.begin(9600);
  #endif
  //pinMode(LED_BUILTIN, OUTPUT);
  // put your setup code here, to run once:
  FastLED.addLeds<NEOPIXEL, DATA_PIN>(leds, NUM_LEDS).setCorrection(TypicalLEDStrip);
  FastLED.setBrightness(BRIGHNESS);
  DisplayLEDFace(imgFace[currentFace]);
}



void loop() {
  setBrightness();
  //digitalWrite(LED_BUILTIN, LOW);
  if (!FaceDelay()) {
    FaceTransition();
  } else {
    FastLED.show();
  }
  delay(50);
  //digitalWrite(LED_BUILTIN, HIGH);
  //delay(10);
}

bool FaceTransitionDone() {
  for(int i = 0; i < NUM_LEDS; i++) { 
    if (usedPoint[i] == false) return false;
  }
  return true;
}

void setBrightness() {
  brightness = map(analogRead(LIGHT_SENSOR_PIN), LIGHT_MIN, LIGHT_MAX, 16, BRIGHNESS);
  FastLED.setBrightness(brightness);
}

bool FaceDelay() {
  if (FaceTransitionDone()) {
    if (timeToUpdate == 0) timeToUpdate = 61;
    if (timeToUpdate > 1) {
      timeToUpdate--;
      #ifdef DEBUG
        Serial.println(timeToUpdate);
      #endif
      return true;
    }
  }
  return false;
}

void FaceTransitionUnUsed() {
  for(int i = 0; i < NUM_LEDS; i++) { 
    usedPoint[i] = false;
  }
}

void FaceTransition() {
  if (FaceTransitionDone()) {
    #ifdef DEBUG
      Serial.println("Face done");
    #endif
    timeToUpdate = 0;
    FaceTransitionUnUsed();
    currentFace++;
    if (currentFace > 2) currentFace=0;
    newFace = currentFace +1;
    if (newFace > 2) newFace = 0;
    #ifdef DEBUG
      Serial.print("Face to ");
      Serial.println(newFace);
    #endif
  }
  while (true) {
    randomDot = random(0, NUM_LEDS);
    if (usedPoint[randomDot] == false) {
      break;
    }
  }
  usedPoint[randomDot] = true;
  XDot(randomDot, imgFace[newFace][randomDot][0], imgFace[newFace][randomDot][1], imgFace[newFace][randomDot][2]);
  FastLED.show();
}

void XDot(int x, unsigned int r, unsigned int g, unsigned int b) {
  dot = FacePixelMap[x];
  leds[dot].r = r<0?0:(r>255?255:r);
  leds[dot].g = g<0?0:(g>255?255:g);
  leds[dot].b = b<0?0:(b>255?255:b);
}
